(function(c){(function(){var b=c.fn.val;c.fn.val=function(a){return arguments.length?b.call(this,a).each(function(){c(this).data("inited.cascadeSelect")&&c(this).trigger("cascadeSelectChange")}):b.call(this)}})();var m=function(b,a){if(a&&void 0!=b){for(var c=b.split(";"),d=[],e,g=0,l=c.length;g<l;g++)e=c[g],a[e]&&(d=d.concat(a[e]));return d}return null},h=function(b,a){return'<option value="'+b+'">'+a+"</option>"},k=function(b,a,f){a=m(f,a.dataSource);b=c(b);if(a){if(b.data("previous-uppertier.cascadeSelect")!==
f){var d=[],e=[];c.each(a,function(b,a){e.push(a.id);d.push(h(a.id,a.label))});d.unshift(h(e.join(";"),"\u5168\u90e8"));b.html(d.join(""));b.data("previous-uppertier.cascadeSelect",f);e=d=null}}else throw Error("Missing data, key="+f);};c.fn.cascadeSelect=function(b){return this.each(function(){var a=c(this);a.data("inited.cascadeSelect")||a.data("inited.cascadeSelect",!0);k(this,b,b.upperTierGetter());a.data("option.cascadeSelect",b);a.bind("change",function(){var a=c(this),d=a.val();k(this,b,b.upperTierGetter());
a.val(d)});a.bind("update",function(){c(this).trigger("change")})})}})(jQuery);